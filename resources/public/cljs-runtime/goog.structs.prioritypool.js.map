{
"version":3,
"file":"goog.structs.prioritypool.js",
"lineCount":59,
"mappings":"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",
"sources":["goog.structs.prioritypool.js"],
"sourcesContent":["goog.provide(\"goog.structs.PriorityPool\");\ngoog.require(\"goog.structs.Pool\");\ngoog.require(\"goog.structs.PriorityQueue\");\ngoog.structs.PriorityPool = function(opt_minCount, opt_maxCount) {\n  this.delayTimeout_ = undefined;\n  this.requestQueue_ = new goog.structs.PriorityQueue();\n  goog.structs.Pool.call(this, opt_minCount, opt_maxCount);\n};\ngoog.inherits(goog.structs.PriorityPool, goog.structs.Pool);\ngoog.structs.PriorityPool.DEFAULT_PRIORITY_ = 100;\ngoog.structs.PriorityPool.prototype.setDelay = function(delay) {\n  goog.structs.PriorityPool.base(this, \"setDelay\", delay);\n  if (this.lastAccess == null) {\n    return;\n  }\n  goog.global.clearTimeout(this.delayTimeout_);\n  this.delayTimeout_ = goog.global.setTimeout(goog.bind(this.handleQueueRequests_, this), this.delay + this.lastAccess - Date.now());\n  this.handleQueueRequests_();\n};\ngoog.structs.PriorityPool.prototype.getObject = function(opt_callback, opt_priority) {\n  if (!opt_callback) {\n    var result = goog.structs.PriorityPool.base(this, \"getObject\");\n    if (result && this.delay) {\n      this.delayTimeout_ = goog.global.setTimeout(goog.bind(this.handleQueueRequests_, this), this.delay);\n    }\n    return result;\n  }\n  var priority = opt_priority !== undefined ? opt_priority : goog.structs.PriorityPool.DEFAULT_PRIORITY_;\n  this.requestQueue_.enqueue(priority, opt_callback);\n  this.handleQueueRequests_();\n  return undefined;\n};\ngoog.structs.PriorityPool.prototype.handleQueueRequests_ = function() {\n  var requestQueue = this.requestQueue_;\n  while (requestQueue.getCount() > 0) {\n    var obj = this.getObject();\n    if (!obj) {\n      return;\n    } else {\n      var requestCallback = requestQueue.dequeue();\n      requestCallback.apply(this, [obj]);\n    }\n  }\n};\ngoog.structs.PriorityPool.prototype.addFreeObject = function(obj) {\n  goog.structs.PriorityPool.superClass_.addFreeObject.call(this, obj);\n  this.handleQueueRequests_();\n};\ngoog.structs.PriorityPool.prototype.adjustForMinMax = function() {\n  goog.structs.PriorityPool.superClass_.adjustForMinMax.call(this);\n  this.handleQueueRequests_();\n};\ngoog.structs.PriorityPool.prototype.disposeInternal = function() {\n  goog.structs.PriorityPool.superClass_.disposeInternal.call(this);\n  goog.global.clearTimeout(this.delayTimeout_);\n  this.requestQueue_.clear();\n  this.requestQueue_ = null;\n};\n\n//# sourceMappingURL=goog.structs.prioritypool.js.map\n"],
"names":["goog","provide","require","structs","PriorityPool","goog.structs.PriorityPool","opt_minCount","opt_maxCount","delayTimeout_","undefined","requestQueue_","PriorityQueue","Pool","call","inherits","DEFAULT_PRIORITY_","prototype","setDelay","goog.structs.PriorityPool.prototype.setDelay","delay","base","lastAccess","global","clearTimeout","setTimeout","bind","handleQueueRequests_","Date","now","getObject","goog.structs.PriorityPool.prototype.getObject","opt_callback","opt_priority","result","priority","enqueue","goog.structs.PriorityPool.prototype.handleQueueRequests_","requestQueue","getCount","obj","requestCallback","dequeue","apply","addFreeObject","goog.structs.PriorityPool.prototype.addFreeObject","superClass_","adjustForMinMax","goog.structs.PriorityPool.prototype.adjustForMinMax","disposeInternal","goog.structs.PriorityPool.prototype.disposeInternal","clear"]
}
