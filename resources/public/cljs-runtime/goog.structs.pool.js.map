{
"version":3,
"file":"goog.structs.pool.js",
"lineCount":134,
"mappings":"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",
"sources":["goog.structs.pool.js"],
"sourcesContent":["goog.provide(\"goog.structs.Pool\");\ngoog.require(\"goog.Disposable\");\ngoog.require(\"goog.structs.Queue\");\ngoog.require(\"goog.structs.Set\");\ngoog.structs.Pool = function(opt_minCount, opt_maxCount) {\n  goog.Disposable.call(this);\n  this.minCount_ = opt_minCount || 0;\n  this.maxCount_ = opt_maxCount || 10;\n  if (this.minCount_ > this.maxCount_) {\n    throw new Error(goog.structs.Pool.ERROR_MIN_MAX_);\n  }\n  this.freeQueue_ = new goog.structs.Queue();\n  this.inUseSet_ = new goog.structs.Set();\n  this.delay = 0;\n  this.lastAccess = null;\n  this.adjustForMinMax();\n};\ngoog.inherits(goog.structs.Pool, goog.Disposable);\ngoog.structs.Pool.ERROR_MIN_MAX_ = \"[goog.structs.Pool] Min can not be greater than max\";\ngoog.structs.Pool.ERROR_DISPOSE_UNRELEASED_OBJS_ = \"[goog.structs.Pool] Objects not released\";\ngoog.structs.Pool.prototype.setMinimumCount = function(min) {\n  if (min > this.maxCount_) {\n    throw new Error(goog.structs.Pool.ERROR_MIN_MAX_);\n  }\n  this.minCount_ = min;\n  this.adjustForMinMax();\n};\ngoog.structs.Pool.prototype.setMaximumCount = function(max) {\n  if (max < this.minCount_) {\n    throw new Error(goog.structs.Pool.ERROR_MIN_MAX_);\n  }\n  this.maxCount_ = max;\n  this.adjustForMinMax();\n};\ngoog.structs.Pool.prototype.setDelay = function(delay) {\n  this.delay = delay;\n};\ngoog.structs.Pool.prototype.getObject = function() {\n  var time = Date.now();\n  if (this.lastAccess != null && time - this.lastAccess < this.delay) {\n    return undefined;\n  }\n  var obj = this.removeFreeObject_();\n  if (obj) {\n    this.lastAccess = time;\n    this.inUseSet_.add(obj);\n  }\n  return obj;\n};\ngoog.structs.Pool.prototype.releaseObject = function(obj) {\n  if (this.inUseSet_.remove(obj)) {\n    this.addFreeObject(obj);\n    return true;\n  }\n  return false;\n};\ngoog.structs.Pool.prototype.removeFreeObject_ = function() {\n  var obj;\n  while (this.getFreeCount() > 0) {\n    obj = this.freeQueue_.dequeue();\n    if (!this.objectCanBeReused(obj)) {\n      this.adjustForMinMax();\n    } else {\n      break;\n    }\n  }\n  if (!obj && this.getCount() < this.maxCount_) {\n    obj = this.createObject();\n  }\n  return obj;\n};\ngoog.structs.Pool.prototype.addFreeObject = function(obj) {\n  this.inUseSet_.remove(obj);\n  if (this.objectCanBeReused(obj) && this.getCount() < this.maxCount_) {\n    this.freeQueue_.enqueue(obj);\n  } else {\n    this.disposeObject(obj);\n  }\n};\ngoog.structs.Pool.prototype.adjustForMinMax = function() {\n  var freeQueue = this.freeQueue_;\n  while (this.getCount() < this.minCount_) {\n    freeQueue.enqueue(this.createObject());\n  }\n  while (this.getCount() > this.maxCount_ && this.getFreeCount() > 0) {\n    this.disposeObject(freeQueue.dequeue());\n  }\n};\ngoog.structs.Pool.prototype.createObject = function() {\n  return {};\n};\ngoog.structs.Pool.prototype.disposeObject = function(obj) {\n  if (typeof obj.dispose == \"function\") {\n    obj.dispose();\n  } else {\n    for (var i in obj) {\n      obj[i] = null;\n    }\n  }\n};\ngoog.structs.Pool.prototype.objectCanBeReused = function(obj) {\n  if (typeof obj.canBeReused == \"function\") {\n    return obj.canBeReused();\n  }\n  return true;\n};\ngoog.structs.Pool.prototype.contains = function(obj) {\n  return this.freeQueue_.contains(obj) || this.inUseSet_.contains(obj);\n};\ngoog.structs.Pool.prototype.getCount = function() {\n  return this.freeQueue_.getCount() + this.inUseSet_.getCount();\n};\ngoog.structs.Pool.prototype.getInUseCount = function() {\n  return this.inUseSet_.getCount();\n};\ngoog.structs.Pool.prototype.getFreeCount = function() {\n  return this.freeQueue_.getCount();\n};\ngoog.structs.Pool.prototype.isEmpty = function() {\n  return this.freeQueue_.isEmpty() && this.inUseSet_.isEmpty();\n};\ngoog.structs.Pool.prototype.disposeInternal = function() {\n  goog.structs.Pool.superClass_.disposeInternal.call(this);\n  if (this.getInUseCount() > 0) {\n    throw new Error(goog.structs.Pool.ERROR_DISPOSE_UNRELEASED_OBJS_);\n  }\n  delete this.inUseSet_;\n  var freeQueue = this.freeQueue_;\n  while (!freeQueue.isEmpty()) {\n    this.disposeObject(freeQueue.dequeue());\n  }\n  delete this.freeQueue_;\n};\n\n//# sourceMappingURL=goog.structs.pool.js.map\n"],
"names":["goog","provide","require","structs","Pool","goog.structs.Pool","opt_minCount","opt_maxCount","Disposable","call","minCount_","maxCount_","Error","ERROR_MIN_MAX_","freeQueue_","Queue","inUseSet_","Set","delay","lastAccess","adjustForMinMax","inherits","ERROR_DISPOSE_UNRELEASED_OBJS_","prototype","setMinimumCount","goog.structs.Pool.prototype.setMinimumCount","min","setMaximumCount","goog.structs.Pool.prototype.setMaximumCount","max","setDelay","goog.structs.Pool.prototype.setDelay","getObject","goog.structs.Pool.prototype.getObject","time","Date","now","undefined","obj","removeFreeObject_","add","releaseObject","goog.structs.Pool.prototype.releaseObject","remove","addFreeObject","goog.structs.Pool.prototype.removeFreeObject_","getFreeCount","dequeue","objectCanBeReused","getCount","createObject","goog.structs.Pool.prototype.addFreeObject","enqueue","disposeObject","goog.structs.Pool.prototype.adjustForMinMax","freeQueue","goog.structs.Pool.prototype.createObject","goog.structs.Pool.prototype.disposeObject","dispose","i","goog.structs.Pool.prototype.objectCanBeReused","canBeReused","contains","goog.structs.Pool.prototype.contains","goog.structs.Pool.prototype.getCount","getInUseCount","goog.structs.Pool.prototype.getInUseCount","goog.structs.Pool.prototype.getFreeCount","isEmpty","goog.structs.Pool.prototype.isEmpty","disposeInternal","goog.structs.Pool.prototype.disposeInternal","superClass_"]
}
