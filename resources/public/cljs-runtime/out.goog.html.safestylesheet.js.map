{
"version":3,
"file":"out.goog.html.safestylesheet.js",
"lineCount":90,
"mappings":"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",
"sources":["out/goog/html/safestylesheet.js"],
"sourcesContent":["/*TRANSPILED*/goog.loadModule(function(exports) {'use strict';/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';\ngoog.module(\"goog.html.SafeStyleSheet\");\ngoog.module.declareLegacyNamespace();\nconst Const = goog.require(\"goog.string.Const\");\nconst SafeStyle = goog.require(\"goog.html.SafeStyle\");\nconst TypedString = goog.require(\"goog.string.TypedString\");\nconst googObject = goog.require(\"goog.object\");\nconst {assert, fail} = goog.require(\"goog.asserts\");\nconst {contains} = goog.require(\"goog.string.internal\");\nconst CONSTRUCTOR_TOKEN_PRIVATE = {};\nclass SafeStyleSheet {\n  constructor(value, token) {\n    this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = token === CONSTRUCTOR_TOKEN_PRIVATE ? value : \"\";\n    this.implementsGoogStringTypedString = true;\n  }\n  static createRule(selector, style) {\n    if (contains(selector, \"\\x3c\")) {\n      throw new Error(`Selector does not allow '<', got: ${selector}`);\n    }\n    const selectorToCheck = selector.replace(/('|\")((?!\\1)[^\\r\\n\\f\\\\]|\\\\[\\s\\S])*\\1/g, \"\");\n    if (!/^[-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|]+$/.test(selectorToCheck)) {\n      throw new Error(\"Selector allows only [-_a-zA-Z0-9#.:* ,\\x3e+~[\\\\]()\\x3d^$|] and \" + \"strings, got: \" + selector);\n    }\n    if (!SafeStyleSheet.hasBalancedBrackets_(selectorToCheck)) {\n      throw new Error(\"() and [] in selector must be balanced, got: \" + selector);\n    }\n    if (!(style instanceof SafeStyle)) {\n      style = SafeStyle.create(style);\n    }\n    const styleSheet = `${selector}{` + SafeStyle.unwrap(style).replace(/</g, \"\\\\3C \") + \"}\";\n    return SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet);\n  }\n  static hasBalancedBrackets_(s) {\n    const brackets = {\"(\":\")\", \"[\":\"]\"};\n    const expectedBrackets = [];\n    for (let i = 0; i < s.length; i++) {\n      const ch = s[i];\n      if (brackets[ch]) {\n        expectedBrackets.push(brackets[ch]);\n      } else if (googObject.contains(brackets, ch)) {\n        if (expectedBrackets.pop() != ch) {\n          return false;\n        }\n      }\n    }\n    return expectedBrackets.length == 0;\n  }\n  static concat(var_args) {\n    let result = \"\";\n    const addArgument = argument => {\n      if (Array.isArray(argument)) {\n        argument.forEach(addArgument);\n      } else {\n        result += SafeStyleSheet.unwrap(argument);\n      }\n    };\n    Array.prototype.forEach.call(arguments, addArgument);\n    return SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(result);\n  }\n  static fromConstant(styleSheet) {\n    const styleSheetString = Const.unwrap(styleSheet);\n    if (styleSheetString.length === 0) {\n      return SafeStyleSheet.EMPTY;\n    }\n    assert(!contains(styleSheetString, \"\\x3c\"), `Forbidden '<' character in style sheet string: ${styleSheetString}`);\n    return SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheetString);\n  }\n  getTypedStringValue() {\n    return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;\n  }\n  static unwrap(safeStyleSheet) {\n    if (safeStyleSheet instanceof SafeStyleSheet && safeStyleSheet.constructor === SafeStyleSheet) {\n      return safeStyleSheet.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;\n    } else {\n      fail(\"expected object of type SafeStyleSheet, got '\" + safeStyleSheet + \"' of type \" + goog.typeOf(safeStyleSheet));\n      return \"type_error:SafeStyleSheet\";\n    }\n  }\n  static createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet) {\n    return new SafeStyleSheet(styleSheet, CONSTRUCTOR_TOKEN_PRIVATE);\n  }\n}\nSafeStyleSheet.prototype.toString = function() {\n  return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_.toString();\n};\nSafeStyleSheet.EMPTY = SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(\"\");\nexports = SafeStyleSheet;\n\n;return exports;});\n"],
"names":["goog","loadModule","exports","module","declareLegacyNamespace","Const","require","SafeStyle","TypedString","googObject","assert","fail","contains","CONSTRUCTOR_TOKEN_PRIVATE","SafeStyleSheet","constructor","value","token","privateDoNotAccessOrElseSafeStyleSheetWrappedValue_","implementsGoogStringTypedString","createRule","selector","style","Error","selectorToCheck","replace","test","hasBalancedBrackets_","create","styleSheet","unwrap","createSafeStyleSheetSecurityPrivateDoNotAccessOrElse","s","brackets","expectedBrackets","i","length","ch","push","pop","concat","var_args","result","addArgument","argument","Array","isArray","forEach","prototype","call","arguments","fromConstant","styleSheetString","EMPTY","getTypedStringValue","safeStyleSheet","typeOf","toString","SafeStyleSheet.prototype.toString"]
}
